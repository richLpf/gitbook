# Git分支管理

> 多人开发需要规定不同的分支，来满足协作的需要



## 一、项目管理规范

目前一个项目设置的分支包括：

- master
- feature/pre
- feature/*
- prod-hotfix/*
- zhangsan/test



> master分支

该分支稳定分支，为生产环境代码，权限级别最高，不能随便合并代码

> feature/pre分支

该分支为预发布分支，为稳定分支。

开发一个新功能时，从该分支拉取代码，测试通过、等待发布可以合并到当前分支。

> feature/func1、feature/func2

该分支为功能分支，为不稳定分支。

新的需求新建该分支，从`feature/pre`拉取，完成后灰度该分支版本，测试通过后合并`feature/pre`等待发布。

> prod-hotfix/*

该分支为bugfix分支，不稳定。

如果线上出现了bug，直接从master分支拉取代码，命名`prod-hotfix/bug`，修复后灰度环境，没问题合并master发布，再同步`feature/pre`

> zhangsan/*

该分支为其他用途分支，不稳定。

如果需要测试啥的或是自己玩，可以以自己命名建立分支，使用结束后删除，原则上不会推送到远程仓库。



## 二、场景模拟

1、张三接到一个紧急的Bug

- 直接从`master`拉取分支命名为`prod-hotfix/bug`

- 修复后灰度生产环境，确认没有问题，合并master发布，再同步`feature/pre`



2、张三接到一个需求：开发模版管理

- 从`feature/pre`分支新建分支`feature/template-manage`
- 再这个分支上开发，开发完毕后发布该版本
- 测试通过后合并`feature/pre`分支等待上线



## 三、前端工作流程

- 1、了解需求，确定要开发的内容
  - 不清楚找对应的需求方确认
  - 辅助内容（原型、需求文档、ui设计、参考内容）
- 2、根据需求建立对应的分支
  - 修复bug分支
  - 功能分支
- 3、开发完以后对照需求自测
  - 代码优化提交merge
  - @对应人员check
- 4、提交测试人员测试
  - 处理测试bug处理
- 5、排期发布
  - 确定发布时间、
  - 确定发布是否依赖后端
  - 提交变更单审核通过
- 6、代码到feature/pre分支
  - 灰度测试环境，测试
- 7、上线
  - 灰度上线
  - 发变更单
  - 自己回归测试
  - @测试人员回归测试
- 8、有问题，回退或者修复