# SVN和Git的原理对比

## SVN的原理和特点

SVN 是基于差异记录的版本控制，每次提交记录的是本地提交和上个版本的差异，然后通过计算得出当前的版本，具体看下图。



图解初始仓库版本一有文件ABC,
1、在版本一的基础上，修改文件A，修改部分为a1，修改文件C，修改部分为c2,提交版本二记录A文件：A+a1， B文件：B, C文件为C+c1 
2、接着修改版本二,修改部分为c3, 提交版本三：A+a1, B, C+c1+c2
3、接着修改版本三,修改部分为a3,b3,提交版本四：A+a1+a3, B+b3, C+c1+c2

我们可以看到SVN记录的是，初始文件和每次更新的差异部分。通过计算初始文件和提交版本差异，得到最终的文件版本。这也就导致了当文件越来越多的时候，SVN拉取速度越来越慢。

同时SVN的服务器上版本存放在一个地方，文件存在另一个地方。这就导致了当本地主机，没有联网是没有办法提交版本的。


## Git的原理和特点

Git是分布式的版本控制，设计的目标就是速度，简单设计，支持多人开发，分布式，适合大型项目。其版本管理原理图：



git文件的记录方式为：初始化文件ABC
1、在版本一的基础上修改A文件，修改后的文件为A1（注意，这里不是差异部分）,修改文件C，修改后的文件为C1, 提交版本二，这时Git记录快照A1+B+C1
2、在版本二的基础上修改文件C1，修改后的文件记C2，提交版本三，这时Git记录快照为A1+B+C2
3、在版本三的基础上，修改文件A1为A2，修改文件B为B1，提交版本四，这时记录快照为A2+B1+C2

这是版本三和版本二的区别可以通过diff算法计算，而本地切换不同的版本只需要将当前快照检出，这速度是很快的。

git每次修改会将快照压缩，增加索引记录在本地.git文件夹中，所以几乎所有的Git操作都是在本地执行，不需要依赖远程仓库，包括版本提交，和分支检出，这就很快了。

如果需要多人开发，只需要实时将本地仓库同步到服务器的仓库，而其他人只需要通过`git clone` 命令将仓库下载到自己的电脑上，这样自己的本地就可以有一个一样的仓库，包括之间的提交历史。开发完毕后，同步到远程，只需要在执行同步远程是联网就可以了。这就做到了支持多人开发。接着由于每个人和远程仓库都是完整的代码仓库，所以不管自己的电脑或是远程仓库的代码丢失，只需要本地有一份就可以恢复所有，这就是分布式的优势。

但Git适用于小文件管理，如果文件太大就会导致每次提交打包一份，导致文件太大。



